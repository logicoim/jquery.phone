/*! jquery.phone v1.0.4 | Copyright 2017 Andrew Ellis (awellis89@gmail.com) | MIT */

(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=[].slice;a=window.jQuery||window.$,a.phone={},a.phone.fn={},a.fn.phone=function(){var b,c;return c=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],null!=c&&"string"==typeof c||(null!=c&&(b=[c]),c="init"),a.phone.fn[c].apply(this,b)},d="+1",a.phone.countries=b={"+1":{code:"US",format:"+. (...) ...-...."},"+44":{code:"GB",format:"+.. .... ......"}},function(a){var b,c,d,e,f,g;for(b=[403,587,780,250,604,778,204,506,709,902,226,249,289,343,416,519,613,647,705,807,905,418,438,450,514,579,581,819,873,306,867],d=0,e=b.length;d<e;d++)f=b[d],a["+1"+f]={code:"CA",format:"+. (...) ...-...."};g=[];for(f in a)c=a[f],g.push(a[f].length=c.format.match(/\./g).length);return g}(b),c=function(a){var c,e,f,g,h,i;a=0!==a.indexOf("+")&&d?d+a.replace(/\D/g,""):"+"+a.replace(/\D/g,""),c=null,g=0;for(h in b)if(e=b[h],a.length>=h.length&&a.substring(0,h.length)===h&&h.length>g){c={};for(f in e)i=e[f],c[f]=i;c.prefix=h,g=h.length}return c},g=function(a){var b;return null!=a.prop("selectionStart")&&a.prop("selectionStart")!==a.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(b=document.selection)?b.createRange:void 0)||!document.selection.createRange().text)},m=function(a,b){var c,d,e,f,g,h,i;try{d=b.prop("selectionStart")}catch(g){f=g,d=null}if(h=b.val(),b.val(a),null!==d&&b.is(":focus"))return d===h.length&&(d=a.length),h!==a&&(i=h.slice(d-1,+d+1||9e9),c=a.slice(d-1,+d+1||9e9),e=a[d],/\d/.test(e)&&i===e+" "&&c===" "+e&&(d+=1)),b.prop("selectionStart",d),b.prop("selectionEnd",d)},j=function(a){var b,c,d,e,f,g,h,i;for(null==a&&(a=""),d="０１２３４５６７８９",e="0123456789",i="",b=a.split(""),g=0,h=b.length;g<h;g++)c=b[g],f=d.indexOf(c),f>-1&&(c=e[f]),i+=c;return i},h=function(a,b){return a===b||(a.length<b.length?b.substring(0,a.length)===a:a.substring(0,b.length)===b)},i=function(b){var c;return c=a(b.currentTarget),setTimeout(function(){var b;return b=c.val(),b=j(b),b=a.phone.formatPhone(b),m(b,c)})},f=function(b){var d,e,f,g,h,i;if(f=String.fromCharCode(b.which),/^\d+$/.test(f))return d=a(b.currentTarget),i=d.val(),e=c(i+f),g=(i.replace(/\D/g,"")+f).length,h=11,e&&(h=e.length),!(g>=h)&&void 0},e=function(b){var c,d;if(c=a(b.currentTarget),d=c.val(),8===b.which&&(null==c.prop("selectionStart")||c.prop("selectionStart")===d.length))return/[-)]?\s\d$/.test(d)?(b.preventDefault(),setTimeout(function(){return c.val(d.replace(/[-)]?\s\d$/,""))})):/\s?[(]\d$/.test(d)?(b.preventDefault(),setTimeout(function(){return c.val(d.replace(/\s?[(]\d$/,""))})):/[+]\d/.test(d)?(b.preventDefault(),setTimeout(function(){return c.val(d.replace(/[+]\d$/,""))})):/\d\s$/.test(d)?(b.preventDefault(),setTimeout(function(){return c.val(d.replace(/\d\s$/,""))})):/\s\d?$/.test(d)?(b.preventDefault(),setTimeout(function(){return c.val(d.replace(/\d$/,""))})):void 0},k=function(a){var b;return!(!a.metaKey&&!a.ctrlKey)||32!==a.which&&(0===a.which||(a.which<33||(b=String.fromCharCode(a.which),!!/[\d\s+]/.test(b))))},l=function(b){var d,e,f,h;if(d=a(b.currentTarget),f=String.fromCharCode(b.which),/^\d+$/.test(f)&&!g(d))return h=(d.val()+f).replace(/\D/g,""),e=c(h),e?h.length<=e.length:h.length<=11},n=function(c){var d,e,f,g;if(d=a(c.currentTarget),g=d.val(),f=a.phone.country(g)||"unknown",!d.hasClass(f))return e=function(){var a,c,d;for(d=[],a=0,c=b.length;a<c;a++)f=b[a],d.push(f.code);return d}(),d.removeClass("unknown"),d.removeClass(e.join(" ")),d.addClass(f),d.toggleClass("identified","unknown"!==f),d.trigger("phone.country",f)},a.phone.fn.init=function(a){return null==a&&(a={}),this.on("keypress",k),this.on("keypress",l),this.on("keypress",f),this.on("keydown",e),this.on("keyup",n),this.on("paste",i),this.on("change",i),this.on("input",i),this.on("input",n),null!=a.defaultPrefix&&(d=a.defaultPrefix),null!=a.value?this.val(a.value).change():null!=this.val()&&this.change(),this},a.phone.fn.val=function(){var a;return(a=this.val())?(a=a.replace(/\D/g,""),0!==this.val().indexOf("+")&&d?d+a:"+"+a):""},a.phone.fn.country=function(){var b;return b=this.phone("val"),a.phone.country(b)},a.phone.fn.prefix=function(){var b;return b=this.phone("val"),a.phone.prefix(b)},a.phone.fn.validate=function(){var a,b;return b=this.phone("val").replace(/\D/g,""),a=c(b),!!a&&b.length===a.length},a.phone.country=function(a){var b;return a?(null!=(b=c(a))?b.code:void 0)||null:null},a.phone.prefix=function(a){var b;return a?(null!=(b=c(a))?b.prefix:void 0)||null:null},a.phone.formatPhone=function(a){var b,e,f,g,i,j,k,l,m,n,o,p,q,r;if(0===a.length||"+"!==a.substring(0,1)&&!d)return"";if(b=c(a),!b)return a;if(r=b.length,a=a.replace(/\D/g,"").slice(0,r),g=b.format,o=b.prefix,d&&(o===d||h(o,d))&&0!==a.indexOf("+")&&(g=g.substring(Math.min(o.length,d.length)+1),null!=b.nationalPrefix)){for(p="",k=l=0,q=b.nationalPrefix.length;0<=q?l<q:l>q;k=0<=q?++l:--l)p+=".";g=p+g}for(f="+"===a.substring(0,1)?a.substring(1):a,e=g.match(/\./g).length,j="",m=0,n=g.length;m<n;m++)if(i=g[m],"."===i){if(0===f.length)break;j+=f.substring(0,1),f=f.substring(1)}else f.length>0&&(j+=i);return j+f}}).call(this);